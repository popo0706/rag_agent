# ===============================================================
# 【要約】
# このスクリプトは ChatGPT に「10+2*3-4*2」を
# ステップバイステップで計算させ、途中計算の説明ごと
# 結果を取得してコンソールに表示する最小サンプルです。
# ===============================================================

# --------------------------------------------
# ChatGPT に「数式をステップバイステップで解いて」と依頼し、
# 結果を取得・表示するシンプルなサンプルコード
# --------------------------------------------

from openai import OpenAI  # ← OpenAI SDK のクライアントクラスをインポート

client = OpenAI()  # ← 環境変数 OPENAI_API_KEY を読み取り、クライアントを生成

response = client.chat.completions.create(
    model="gpt-4.1-nano",  # 使うモデル：GPT-4.1 の軽量＆高速版
    messages=[
        {
            "role": "system",  # ① モデル全体への指示（システムメッセージ）
            # ↓ 途中計算の手順を詳しく出力してほしいと依頼
            "content": "ステップバイステップで考えてください。",
        },
        {
            "role": "user",  # ② 実際に解かせたい入力（ユーザーメッセージ）
            # ↓ 数式（10＋2×3−4×2）※演算子の優先順位にも注意
            "content": "10+2*3-4*2",
        },
    ],
)

# ▼ ChatGPT が返した回答（解説付きの自然文）は
#    response.choices[0].message.content に格納される。
print(response.choices[0].message.content)  # ← 結果と手順を表示
